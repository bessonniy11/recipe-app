# Bessonniy Recipe App

Добро пожаловать в проект Bessonniy Recipe App! Этот проект представляет собой пример монорепозитория, организованного с использованием Git Submodules. Он включает в себя клиентскую часть (frontend), серверную часть (backend) и общие сущности (shared-entities).

## Содержание

*   [Высокоуровневая архитектура](#высокоуровневая-архитектура)
*   [Структура проекта](#структура-проекта)
*   [Развертывание проекта](#развертывание-проекта)
    *   [Клонирование корневого репозитория](#клонирование-корневого-репозитория)
    *   [Инициализация и обновление подмодулей](#инициализация-и-обновление-подмодулей)
*   [Работа с подмодулями](#работа-с-подмодулями)
    *   [Обновление подмодулей](#обновление-подмодулей)
    *   [Внесение изменений в подмодуль](#внесение-изменений-в-подмодуль)
    *   [Добавление нового подмодуля](#добавление-нового-подмодуля)
    *   [Удаление подмодуля](#удаление-подмодуля)
*   [Запуск проекта](#запуск-проекта)
    *   [Frontend (Angular)](#frontend-angular)
    *   [Backend (Node.js)](#backend-nodejs)
*   [Рабочий процесс с ветками Git](#рабочий-процесс-с-ветками-git)
*   [Дополнительная документация](#дополнительная-документация)

## Высокоуровневая архитектура

Проект Bessonniy Recipe App состоит из нескольких независимых компонентов, объединенных в единый репозиторий с использованием Git Submodules.

*   **Корневой репозиторий**: Содержит общую документацию (`docs/`), файлы конфигурации и ссылки на подмодули.
*   **Frontend**: Клиентская часть приложения, разработанная на Angular.
*   **Backend**: Серверная часть приложения, разрабатываемая на Node.js.
*   **Shared Entities**: Модуль, содержащий общие модели данных и интерфейсы, используемые как frontend, так и backend.

## Структура проекта

```
.
├── AGENTS.md
├── README.md
├── .gitmodules
├── docs/
│   └── (документация проекта)
└── projects/
    ├── frontend/       # Git Submodule: Angular приложение
    ├── backend/        # Git Submodule: Node.js сервер
    └── shared-entities/# Git Submodule: Общие модели данных
```

## Развертывание проекта

Для работы с проектом необходимо выполнить следующие шаги:

### Клонирование корневого репозитория

Сначала клонируйте основной репозиторий:

```bash
git clone https://github.com/bessonniy11/recipe-app.git
cd recipe-app
```

### Инициализация и обновление подмодулей

После клонирования корневого репозитория, подмодули будут представлены как пустые директории. Для получения их содержимого необходимо инициализировать и обновить подмодули:

```bash
git submodule update --init --recursive
```

Эта команда инициализирует подмодули, клонирует их содержимое и переключает на зафиксированный коммит.

## Работа с подмодулями

Git Submodules позволяют работать над каждым модулем проекта как над отдельным репозиторием, при этом они являются частью основного (родительского) репозитория.

### Обновление подмодулей

Если в удаленных репозиториях подмодулей появились новые изменения, их можно получить следующей командой:

```bash
git submodule update --remote
```

Это обновит все подмодули до последних коммитов в их удаленных ветках.

### Внесение изменений в подмодуль

Для внесения изменений в подмодуль:

1.  Перейдите в директорию подмодуля:
    ```bash
    cd projects/frontend # или projects/backend, projects/shared-entities
    ```
2.  Внесите необходимые изменения и закоммитьте их:
    ```bash
    git add .
    git commit -m "Описание изменений в подмодуле"
    git push origin master # или main, в зависимости от имени ветки
    ```
3.  Вернитесь в корневой репозиторий:
    ```bash
    cd ../..
    ```
4.  Зафиксируйте изменения в родительском репозитории, указывающие на новый коммит в подмодуле:
    ```bash
    git add projects/frontend # или projects/backend, projects/shared-entities
    git commit -m "Обновлен подмодуль frontend до новой версии"
    git push origin master
    ```

**Важно**: Всегда отправляйте изменения в подмодуле *до того*, как зафиксируете ссылку на него в родительском репозитории. В противном случае, при клонировании родительского репозитория, подмодуль может указывать на несуществующий коммит.

### Добавление нового подмодуля

Для добавления нового подмодуля (например, UI Kit):

1.  Создайте пустой репозиторий на GitHub (например, `recipe-app-ui-kit.git`).
2.  В корневом репозитории выполните:
    ```bash
    git submodule add https://github.com/bessonniy11/recipe-app-ui-kit.git projects/ui-kit
    ```
3.  Перейдите в директорию нового подмодуля:
    ```bash
    cd projects/ui-kit
    ```
4.  Создайте первый коммит (например, добавив `README.md`) и отправьте его:
    ```bash
    echo "# UI Kit" > README.md
    git add .
    git commit -m "Initial commit for UI Kit module"
    git push origin master # или main
    ```
5.  Вернитесь в корневой репозиторий и закоммитьте изменения:
    ```bash
    cd ../..
    git add .gitmodules projects/ui-kit
    git commit -m "Добавлен новый подмодуль UI Kit"
    git push origin master
    ```

### Удаление подмодуля

Для удаления подмодуля:

1.  Деинициализируйте подмодуль:
    ```bash
    git submodule deinit -f projects/ui-kit # Замените на нужный подмодуль
    ```
2.  Удалите директорию подмодуля из файловой системы:
    ```bash
    rm -rf projects/ui-kit # В PowerShell используйте Remove-Item -Recurse -Force projects/ui-kit
    ```
3.  Удалите запись о подмодуле из `.git/config`:
    ```bash
    git rm -f projects/ui-kit
    ```
4.  Удалите секцию подмодуля из файла `.gitmodules` (откройте файл и удалите вручную или используйте текстовый редактор).
5.  Зафиксируйте изменения в корневом репозитории:
    ```bash
    git add .gitmodules
    git commit -m "Удален подмодуль UI Kit"
    git push origin master
    ```

## Рабочий процесс с ветками Git

Для эффективной и организованной разработки в проекте Bessonniy Recipe App используется следующий рабочий процесс с ветками Git, применимый как к корневому репозиторию, так и ко всем подмодулям (`frontend`, `backend`, `shared-entities`) и другим, если/когда они появяться.

### **1. Ветка `master` (Продакшн / Стабильная)**

*   Эта ветка предназначена для развертывания стабильного, полностью протестированного и готового к продакшну кода.
*   **Категорически запрещено работать напрямую в ветке `master`**.
*   Обновления в `master` должны происходить исключительно путем слияния (merge) из ветки `dev` после завершения цикла разработки и всестороннего тестирования.

### **2. Ветка `dev` (Разработка)**

*   Это основная ветка для активной разработки всех новых функций и исправлений ошибок.
*   Всегда создавайте новые функциональные ветки (см. ниже) из актуальной ветки `dev`.
*   **Перед началом любой новой работы**, убедитесь, что ваша локальная ветка `dev` и `dev` подмодулей актуальны. Для этого:
    ```bash
    # Для корневого репозитория
    git checkout dev
    git pull origin dev
    # Для каждого подмодуля
    cd projects/frontend && git checkout master && git pull origin master && cd ../..
    cd projects/backend && git checkout master && git pull origin master && cd ../..
    cd projects/shared-entities && git checkout master && git pull origin master && cd ../..
    ```
    *Примечание: Если подмодуль использует ветку `main`, замените `master` на `main`.*

### **3. Функциональные ветки (Feature/Bugfix)**

*   Для реализации каждой новой функции или исправления ошибки создавайте отдельную ветку из `dev`. Это обеспечивает изоляцию изменений и упрощает код-ревью.
    ```bash
    git checkout dev # Убедитесь, что вы в актуальной ветке dev
    git checkout -b feature/название-вашей-функции # Пример: feature/add-user-auth
    # или
    git checkout -b bugfix/описание-исправления # Пример: bugfix/fix-login-issue
    ```
*   Работайте над функциональностью в этой ветке.
*   После завершения работы и локального тестирования, влейте функциональную ветку обратно в `dev`:
    ```bash
    git checkout dev
    git merge feature/название-вашей-функции # Разрешите любые конфликты слияния
    git push origin dev
    ```

### **4. Слияние `dev` в `master` (Подготовка к релизу)**

*   Когда набор функций или этап разработки завершен и полностью протестирован в `dev`, `dev` может быть влита в `master`.
*   Это действие обычно выполняется перед релизом новой версии приложения.
    ```bash
    git checkout master
    git pull origin master # Убедитесь, что master актуальна
    git merge dev # Разрешите любые конфликты слияния
    git push origin master
    ```
*   Рекомендуется также рассмотреть создание тега релиза (`git tag -a v1.0 -m "Release v1.0"`) после слияния в `master`.

---

## Запуск проекта

### Frontend (Angular)

1.  Перейдите в директорию frontend:
    ```bash
    cd projects/frontend
    ```
2.  Установите зависимости:
    ```bash
    npm install
    ```
3.  Запустите Angular приложение:
    ```bash
    npm start
    ```
    Приложение будет доступно по адресу `http://localhost:4200/`.

### Backend (Node.js)

(Инструкции будут добавлены после разработки backend модуля)

1.  Перейдите в директорию backend:
    ```bash
    cd projects/backend
    ```
2.  Установите зависимости:
    ```bash
    npm install
    ```
3.  Запустите Node.js сервер:
    ```bash
    npm start # Или команда, указанная в package.json
    ```

## Дополнительная документация

*   `AGENTS.md`: Правила и инструкции для работы с AI-агентами.
*   `docs/`: Директория для общей документации проекта.
